---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import { Image } from 'astro:assets';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="id">
	<head>
		<BaseHead title="Tutorial Lengkap - IT Expert" description={SITE_DESCRIPTION} />
		<style>
			main { width: 960px; max-width: calc(100% - 2em); margin: auto; padding: 3em 1em; }
            
            .page-heading { text-align: center; margin-bottom: 3rem; }
            .page-heading h1 { font-size: 2.5rem; color: #fff; font-weight: 800; letter-spacing: -0.025em; }
            .page-heading p { color: #94a3b8; font-size: 1.1rem; }

			.post-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 2rem;
				list-style: none;
				padding: 0;
                margin: 0;
			}

            /* --- RACIKAN WARNA BARU --- */
			.post-card {
                /* Background: Lebih gelap dari yang tadi, tapi lebih terang dari background utama */
                background: #1e293b; /* Slate-800 */
                
                /* Border: Ini kuncinya! Kita kasih warna lebih terang biar batasnya tegas */
                border: 1px solid #334155; 
                
                border-radius: 16px; /* Lebih membulat sedikit biar modern */
                overflow: hidden;
                transition: all 0.3s ease;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }

			.post-card:hover { 
                transform: translateY(-5px); 
                /* Efek Glow Ungu tipis saat hover */
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 0 15px rgba(99, 102, 241, 0.3);
                border-color: #6366f1; /* Border jadi Ungu */
            }
            /* ------------------------- */

			.post-card a { text-decoration: none; color: inherit; display: block; }
            
            .img-container {
                width: 100%;
                aspect-ratio: 16/9;
                background: #0f172a; /* Slate-900 (Gelap pekat buat dasar gambar) */
                overflow: hidden;
                border-bottom: 1px solid #334155;
            }
			.img-container img { 
                width: 100%; 
                height: 100%; 
                object-fit: cover; 
                transition: transform 0.5s ease;
            }
            
            /* Efek Zoom halus pada gambar saat hover */
            .post-card:hover .img-container img {
                transform: scale(1.05);
            }

            .no-img { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #475569; }

            .content { padding: 1.5rem; }
			.title { margin: 0 0 0.75rem 0; font-size: 1.35rem; line-height: 1.3; color: #f8fafc; font-weight: 700; }
			.date { margin: 0; color: #94a3b8; font-size: 0.9rem; font-weight: 500; display: flex; align-items: center; gap: 0.5rem; }
            
            /* Ikon kalender kecil */
            .date::before {
                content: "ðŸ“…";
                font-size: 0.8rem;
                opacity: 0.7;
            }
		</style>
	</head>
	<body class="bg-slate-950 text-slate-200 antialiased">
		<Header />
		<main>
            <div class="page-heading">
                <h1>ðŸ“š Semua Tutorial</h1>
                <p>Kumpulan solusi teknis yang sudah teruji di lapangan.</p>
            </div>
            <section>
				<ul class="post-grid">
					{
						posts.map((post) => (
							<li class="post-card">
								<a href={`/blog/${post.id}/`}>
                                    <div class="img-container">
                                        {post.data.heroImage ? (
                                            <Image width={720} height={360} src={post.data.heroImage} alt="" />
                                        ) : (
                                            <div class="no-img">No Image</div>
                                        )}
                                    </div>
                                    <div class="content">
                                        <h4 class="title">{post.data.title}</h4>
                                        <p class="date">
                                            <FormattedDate date={post.data.pubDate} />
                                        </p>
                                    </div>
								</a>
							</li>
						))
					}
				</ul>
			</section>
		</main>
		<Footer />
	</body>
</html>